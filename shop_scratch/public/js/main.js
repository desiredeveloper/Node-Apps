(function() {
  
  'use strict';
  
  var isDrawing, lastPoint;
  var container    = document.getElementById('js-container'),
      canvas       = document.getElementById('js-canvas'),
      canvasWidth  = canvas.width,
      canvasHeight = canvas.height,
      ctx          = canvas.getContext('2d'),
      image        = new Image(),
      brush        = new Image();


  // base64 Workaround because Same-Origin-Policy
  image.src = 'data:image/png;base64,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';
  image.onload = function() {
    ctx.drawImage(image, -85, 0);
    // Show the form when Image is loaded.
    document.querySelectorAll('.form')[0].style.visibility = 'visible';
  };
  brush.src = 'data:image/png;base64,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';
  
  canvas.addEventListener('mousedown', handleMouseDown, false);
  canvas.addEventListener('touchstart', handleMouseDown, false);
  canvas.addEventListener('mousemove', handleMouseMove, false);
  canvas.addEventListener('touchmove', handleMouseMove, false);
  canvas.addEventListener('mouseup', handleMouseUp, false);
  canvas.addEventListener('touchend', handleMouseUp, false);
  
  function distanceBetween(point1, point2) {
    return Math.sqrt(Math.pow(point2.x - point1.x, 2) + Math.pow(point2.y - point1.y, 2));
  }
  
  function angleBetween(point1, point2) {
    return Math.atan2( point2.x - point1.x, point2.y - point1.y );
  }
  
  // Only test every `stride` pixel. `stride`x faster,
  // but might lead to inaccuracy
  function getFilledInPixels(stride) {
    if (!stride || stride < 1) { stride = 1; }
    
    var pixels   = ctx.getImageData(0, 0, canvasWidth, canvasHeight),
        pdata    = pixels.data,
        l        = pdata.length,
        total    = (l / stride),
        count    = 0;
    
    // Iterate over all pixels
    for(var i = count = 0; i < l; i += stride) {
      if (parseInt(pdata[i]) === 0) {
        count++;
      }
    }
    
    return Math.round((count / total) * 100);
  }
  
  function getMouse(e, canvas) {
    var offsetX = 0, offsetY = 0, mx, my;

    if (canvas.offsetParent !== undefined) {
      do {
        offsetX += canvas.offsetLeft;
        offsetY += canvas.offsetTop;
      } while ((canvas = canvas.offsetParent));
    }

    mx = (e.pageX || e.touches[0].clientX) - offsetX;
    my = (e.pageY || e.touches[0].clientY) - offsetY;

    return {x: mx, y: my};
  }
  
  function handlePercentage(filledInPixels) {
    filledInPixels = filledInPixels || 0;
    console.log(filledInPixels + '%');
    if (filledInPixels > 50) {
      canvas.parentNode.removeChild(canvas);
    }
  }
  
  function handleMouseDown(e) {
    isDrawing = true;
    lastPoint = getMouse(e, canvas);
  }

  function handleMouseMove(e) {
    if (!isDrawing) { return; }
    
    e.preventDefault();

    var currentPoint = getMouse(e, canvas),
        dist = distanceBetween(lastPoint, currentPoint),
        angle = angleBetween(lastPoint, currentPoint),
        x, y;
    
    for (var i = 0; i < dist; i++) {
      x = lastPoint.x + (Math.sin(angle) * i) - 25;
      y = lastPoint.y + (Math.cos(angle) * i) - 25;
      ctx.globalCompositeOperation = 'destination-out';
      ctx.drawImage(brush, x, y);
    }
    
    lastPoint = currentPoint;
    handlePercentage(getFilledInPixels(32));
  }

  function handleMouseUp(e) {
    isDrawing = false;
  }
  
})();